<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, all">
    <meta name="googlebot" content="index,follow, all">
    <meta name="author" content="CDC S.L.">
    {% if config is defined %}
      {% for cfg in config.headerMetadata %}
        <meta name="{{ cfg.name }}" content="{{ cfg.content }}">
      {% endfor %}
      <meta property="og:site_name" content="{{ config.nombreWeb }}">
      <meta property="og:description" content="{{config.headerMetaDescription }}">
      <meta property="og:type" content="website">
    {% endif %}
    <title>
      {% block title %}Panel de Control -
        {{ config.nombreWeb }}
      {% endblock %}
    </title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,200;0,300;0,400;0,500;0,600;1,300&family=Roboto+Condensed:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap">
    <link rel="stylesheet" href="{{ asset('vendor/mdi/css/materialdesignicons.min.css') }}">
    <link rel="stylesheet" href="{{ asset('vendor/bootstrap/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ asset('vendor/morris/morris.css') }}">
    <link rel="stylesheet" href="{{ asset('vendor/fileinput/fileinput.min.css') }}">
    <link rel="stylesheet" href="{{ asset('vendor/summernote/summernote-bs4.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/admin.css') }}">
    <link rel="stylesheet" href="{{ asset('css/estilo.css') }}">
    <link rel="stylesheet" href="{{ asset('css/temas/theme.css') }}">
    <link rel="stylesheet" href="{{ asset('css/temas/theme2.css') }}">
    <link rel="stylesheet" href="{{ asset('css/temas/theme3.css') }}"> 
    {% block stylesheets %}{% endblock %}
    <style>
        :root {
            --theme-main-color: {{ config.data.estilo|default('#04569B') }};
        }
    </style>

    {# Temporalmente, muestra el valor de config.data.estilo #}
    {# Elimina esto después de verificar #}
    <!-- Valor de config.data.estilo: {{ config.data.estilo }} -->


    </head>
    <body>
      {% block header %}
        <nav class="navbar theme-bg">
          <div class="d-flex">
            <a href="javascript:void(0);" class="bars"></a>
            <a class="ml-5" href="{{url('home')}}"><img src="{{ asset(config.logo) }}" title="{{ config.nombreWeb}}" alt="{{config.nombreWeb}}"></a>
          </div>
          <h5>Administración</h5>
        </nav>
      {% endblock %}
      <main>
        <aside id="leftsidebar" class="sidebar">
          <div class="user-info">
            <div class="info-container">
              <div class="name">
                <h4 class="font-weight-bold">Administración</h4>
                <h5 class="mt-2">[
                  {{app.user.getUserIdentifier}}
                  ]</h5>
              </div>
            </div>

          </div>
          <div class="menu">
            <ul class="list">
              <li>
                <a href="{{path('home')}}">
                  <i class="mdi mdi-home mdi-24px mr-2"></i>
                  <span>Inicio</span>
                </a>
              </li>
              <li class="{{ app.request.uri == url('admin') ? 'active' :'' }}">
                <a href="{{ url('admin') }}">
                  <i class="mdi mdi-monitor-dashboard mdi-24px mr-2"></i>
                  <span>Dashboard</span>
                </a>
              </li>
              <li class="{{ app.request.uri == url('admin-config') ? 'active' :'' }}">
                <a href="{{ url('admin-config') }}">
                  <i class="mdi mdi-cog mdi-24px mr-2"></i>
                  <span>Configuración</span>
                </a>
              </li>
              <li class="{{ app.request.uri == url('admin-textos') ? 'active' :'' }}">
                <a href="{{ url('admin-textos') }}">
                  <i class="mdi mdi-bulletin-board mdi-24px mr-2"></i>
                  <span>CMS</span>
                </a>
              </li>
              {% if config.valoraciones %}
                <li class="{{ app.request.uri == url('admin-valoraciones') ? 'active' :'' }}">
                  <a href="{{ url('admin-valoraciones') }}">
                    <i class="mdi mdi-book-edit-outline mdi-24px mr-2"></i>
                    <span>Opiniones</span>
                  </a>
                </li>
              {% endif %}
              {% if config.formularioRecogida %}
                <li class="{{ app.request.uri == url('admin-form-rec') ? 'active' :'' }}">
                  <a href="{{ url('admin-form-rec') }}">
                    <i class="mdi mdi-truck-fast-outline mdi-24px mr-2"></i>
                    <span>Formulario Recogida</span>
                  </a>
                </li>
              {% endif %}
            </ul>
          </div>
        </aside>
        <section class="content"> {% block body %}{% endblock %}
          </section>
        </main>
        <script src="{{ asset('vendor/jquery/jquery-3.5.1.min.js') }}"></script>
        <script src="{{ asset('vendor/jquery/jquery.countTo.js') }}"></script>
        <script src="{{ asset('vendor/bootstrap/popper.min.js') }}"></script>
        <script src="{{ asset('vendor/bootstrap/bootstrap.min.js') }}"></script>
        <script src="{{ asset('vendor/fileinput/fileinput.min.js') }}"></script>
        <script src="{{ asset('vendor/fileinput/theme.js') }}"></script>
        <script src="{{ asset('vendor/fileinput/locales/es.js') }}"></script>

        <script src="{{ asset('vendor/morris/raphael.min.js') }}"></script>
        <script src="{{ asset('vendor/morris/morris.min.js') }}"></script>
        <script src="{{ asset('vendor/summernote/summernote-bs4.min.js') }}"></script>
        <script src="{{ asset('vendor/summernote/lang/summernote-es-ES.min.js') }}"></script>
        <script src="{{ asset('vendor/dayjs/dayjs.min.js') }}"></script>
        <script src="{{ asset('vendor/dayjs/utc.min.js') }}"></script>
        <script>
          dayjs.extend( window.dayjs_plugin_utc )
        </script>
        <script src="{{ asset('vendor/materialize/zz_materialize.js') }}"></script>
        <script src="{{ asset('vendor/materialize/anime.min.js') }}"></script>

        <script src="{{ asset('vendor/materialize/cash.js') }}"></script>
        <script src="{{ asset('vendor/materialize/component.js') }}"></script>
        <script src="{{ asset('vendor/materialize/collapsible.js') }}"></script>
        <script src="{{ asset('vendor/materialize/tabs.js') }}"></script>

        {% if (app.environment == 'dev') %}
          <script src="{{ asset('vendor/vue/vue.js') }}"></script>
        {% else %}
          <script src="{{ asset('vendor/vue/vue.min.js') }}"></script>
        {% endif %}

        <script src="{{ asset('js/tools.js') }}"></script>
        <script src="{{ asset('js/admin/admin.js') }}"></script>
        <script>
          T.urlBase = "{{ url('home') }}";
          $.fn.fileinput.defaults.language = 'es';
          $.fn.fileinput.defaults.maxFileSize = T.maxFileSizeUpload;
        </script>
        {% block javascripts %}{% endblock %}
        {% for message in app.flashes('success') %}
          {% set msg = message|split('#', 2) %}
          {% if msg|length == 2 %}
            <script>
              $( () => T.modalOk( '{{ msg[0] }}', '{{ msg[1] }}' ) );
            </script>
          {% else %}
            <script>
              $( () => T.modalOk( '{{ message }}' ) );
            </script>
          {% endif %}
        {% endfor %}
      </body>
    </html>

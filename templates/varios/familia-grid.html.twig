{% extends 'base.html.twig' %}
{% block body %}
	<main>
		{% if lista_subfamilias is empty %}
			<div class="text-center py-5">
				<h1 class="text-center fam-name-title">{{ fam.nombre }}</h1>
				<div class="h1 mt-5">La familia no tiene subfamilias</div>
			</div>
		{% else %}
			<div class="d-flex flex-wrap flex-md-nowrap justify-content-center" style=" margin-top:70px">
				{% if config.data.mostrar_atributos %}
					<section class="attr-container">

						{% if attrChecked %}
							<a href="{{ cleanUrl | raw }}" class="btn btn-sm btn-primary w-100 text-white mb-2">
								<i class="mdi mdi-autorenew mr-2"></i>Limpiar filtros
							</a>
						{% endif %}

						{% for attr in attributes %}
							<div class="title titatributos" data-toggle="collapse" data-target="#list{{ loop.index }}" aria-expanded="false" aria-controls="list{{ loop.index }}">
								<span>{{ attr.title }}</span>
								<i class="mdi mdi-chevron-up"></i>
								<i class="mdi mdi-chevron-down"></i>
							</div>
							<div class="collapse show" role="tabpanel" id="list{{ loop.index }}">
								<ul class="list-group">
									{% for row in attr.rows %}
										<li class="list-group-item data">
											{% if routeName == 'search' %}
												{% set row_url = url(routeName, {'q': row.url }) | url_decode %}
											{% else %}
												{% set row_url = url(routeName, {'param': row.url}) %}
											{% endif %}
											<a href="{{ row_url }}">
												<div class="item">
													<div>
														{% if row.checked %}
															<i class="mdi mdi-checkbox-outline mdi-24px"></i>
														{% else %}
															<i class="mdi mdi-checkbox-blank-outline mdi-24px"></i>
														{% endif %}
													</div>
													<div class="tipoatributo">{{ row.nombre }}</div>
													<div class="badge theme.bg">{{ row.num_art }}</div>
												</div>
											</a>
										</li>
									{% endfor %}
								</ul>
							</div>
						{% endfor %}

						{# Agregar la sección de subfamilias como un filtro más #}
						{% if lista_subfamilias is not empty %}
							<div class="title titatributos" data-toggle="collapse" data-target="#subfamiliasList" aria-expanded="false" aria-controls="subfamiliasList">
								<span>Subfamilias</span>
								<i class="mdi mdi-chevron-up"></i>
								<i class="mdi mdi-chevron-down"></i>
							</div>
							<div class="collapse show" role="tabpanel" id="subfamiliasList">
								<ul class="list-group">
									{% for sub in lista_subfamilias %}
										<li class="list-group-item data">
											<a href="{{ url('subfamilia', {param: sub.url}) }}">
												<div class="item">
													<div>
														<i class="mdi mdi-checkbox-blank-outline mdi-24px"></i>
													</div>
													<div class="tipoatributo">{{ sub.nombre }}</div>
												</div>
											</a>
										</li>
									{% endfor %}
								</ul>
							</div>
						{% endif %}

					</section>
				{% endif %}

				<div class="w-100">
					<div class="text-center">
						<h1 class="fam-name-title mb-0">{{ fam.nombre }}</h1>
					</div>
{# 					<div class="subfamilias-grid-container">
						{% for sub in lista_subfamilias %}
							<a href="{{ url('subfamilia', {param: sub.url}) }}">
								<div>
									<img width="120" height="120" class="rounded-circle border theme-border" src="{{ asset(sub.url_imagen) }}" alt="{{ sub.nombre }}">
									<h2 class="name">{{ sub.nombre }}</h2>
								</div>
							</a>
						{% endfor %}
					</div> #}
					<div class="product-list-container-2">
						{% for art in articulos %}
							{% include 'articulo/art-minificha-2.html.twig' %}
						{% endfor %}
					</div>
					{#           <div class="description">
					            {{ fam.web_description | raw}}
					          </div> #}
					{% include 'tools/pagination.html.twig' %}
				</div>
			</div>
		{% endif %}
	</main>
{% endblock %}
